<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport"
 content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>荒教団</title>

<style>
:root{
 --red:#ff003c;
 --blue:#00f2ff;
 --bg:#050205;
}

*{
 box-sizing:border-box;
 -webkit-tap-highlight-color:transparent;
}

html,body{
 margin:0;
 width:100%;
 height:100%;
 background:#000;
 overflow:hidden;
 font-family:'Hiragino Mincho ProN',serif;
}

/* ===== TV枠 ===== */
.tv{
 position:relative;
 width:100%;
 height:100%;
 padding:16px;
 background:#111;
}
.tv-frame{
 position:absolute;
 inset:0;
 border-radius:34px;
 border:14px solid #222;
 box-shadow:inset 0 0 60px #000;
 pointer-events:none;
}

/* ===== 画面 ===== */
.screen{
 position:relative;
 width:100%;
 height:100%;
 border-radius:26px;
 background:#000;
 overflow:hidden;
}

/* スクロール可能領域 */
.screen-inner{
 position:absolute;
 inset:0;
 background:var(--bg);
 color:#ddd;
 overflow-y:auto;
 overscroll-behavior:none;
}

/* 走査線 */
.screen-inner::after{
 content:"";
 position:fixed;
 inset:0;
 background:linear-gradient(
   rgba(18,16,16,0) 50%,
   rgba(0,0,0,.25) 50%
 );
 background-size:100% 4px;
 pointer-events:none;
 z-index:20;
}

/* ===== 電源ON ===== */
.boot{
 position:absolute;
 inset:0;
 background:#000;
 z-index:50;
 display:flex;
 align-items:center;
 justify-content:center;
}
.boot-line{
 width:0;
 height:2px;
 background:#fff;
 animation:boot 1.3s ease-out forwards;
}
@keyframes boot{
 30%{width:100%}
 60%{filter:blur(2px)}
 100%{width:100%;height:100%}
}

/* ===== ヘッダ ===== */
.header{
 text-align:center;
 padding:28px 10px;
}
.glitch{
 font-size:2.4rem;
 text-shadow:-2px 0 var(--blue),2px 0 var(--red);
}

/* ===== 教典 ===== */
.scripture{
 padding:20px;
 font-size:.8rem;
 line-height:2;
}
.scripture p{
 border-left:2px solid var(--blue);
 padding-left:10px;
 margin:22px 0;
 color:#aaa;
 user-select:none;
}

/* ===== 入信 ===== */
.join{
 margin:30px auto 60px;
 width:200px;
 padding:14px;
 text-align:center;
 border:2px solid var(--red);
 color:var(--red);
 user-select:none;
}
.join.hold{
 background:rgba(255,0,60,.4);
 color:#fff;
}

/* ===== 波紋 ===== */
.ripple{
 position:absolute;
 width:20px;
 height:20px;
 border-radius:50%;
 background:radial-gradient(
   circle,
   rgba(0,242,255,.4),
   rgba(0,242,255,.15),
   rgba(0,0,0,0) 70%
 );
 transform:scale(0);
 animation:ripple 1s ease-out forwards;
 pointer-events:none;
 z-index:5;
}
@keyframes ripple{
 to{transform:scale(18);opacity:0}
}

/* ===== 割れ ===== */
.flash{
 position:absolute;
 inset:0;
 background:#fff;
 opacity:0;
 z-index:40;
}
.shatter{
 position:absolute;
 inset:0;
 z-index:45;
 pointer-events:none;
}
.shard{
 position:absolute;
 inset:-20%;
 background:var(--bg);
 animation:shard .9s ease-out forwards;
}
@keyframes shard{
 to{
   transform:translate(var(--dx),var(--dy)) rotate(var(--r)) scale(1.2);
   opacity:0;
 }
}

/* ===== 通知 ===== */
.notify-box{
 position:fixed;
 right:12px;
 bottom:12px;
 width:240px;
 display:flex;
 flex-direction:column;
 gap:6px;
 z-index:100;
}
.notify{
 background:#111;
 border-left:3px solid var(--red);
 padding:8px;
 font-size:.65rem;
 color:#ccc;
}
</style>
</head>

<body>

<div class="tv">
 <div class="tv-frame"></div>

 <div class="screen">
  <div class="screen-inner" id="screen">

   <div class="boot" id="boot">
    <div class="boot-line"></div>
   </div>

   <div class="header">
    <div class="glitch">荒教団</div>
    <div style="font-size:.65rem;color:#666">SERIAL: ARASH-000</div>
   </div>

   <div class="scripture" id="scripture">
    <p>―― 接続は既に完了している</p>
    <p>―― 拒否は記録されない</p>
    <p>―― 観測は継続中</p>
    <p>―― 入信とは破壊である</p>
   </div>

   <div class="join" id="join">長押しで入信</div>

  </div>
 </div>
</div>

<div class="notify-box" id="notifyBox"></div>

<script>
document.addEventListener('gesturestart', e => e.preventDefault());

/* boot */
setTimeout(()=>boot.remove(),1300);

const screen = document.getElementById('screen');
const join   = document.getElementById('join');
const box    = document.getElementById('notifyBox');

let holdTimer;

/* 波紋 */
screen.addEventListener('pointerdown',e=>{
 const r=screen.getBoundingClientRect();
 const rip=document.createElement('div');
 rip.className='ripple';
 rip.style.left=`${e.clientX-r.left-10}px`;
 rip.style.top =`${e.clientY-r.top-10}px`;
 screen.appendChild(rip);
 rip.onanimationend=()=>rip.remove();
});

/* 教典破壊 */
document.querySelectorAll('#scripture p').forEach(p=>{
 p.addEventListener('pointerdown',()=>{
   p.textContent = p.textContent.replace(/[一-龠ぁ-んァ-ン]/g,
     () => Math.random()<.2 ? '▮' : ''
   );
 });
});

/* 通知 */
function notify(t){
 const n=document.createElement('div');
 n.className='notify';
 n.textContent=t;
 box.prepend(n);
 if(box.children.length>8) box.lastChild.remove();
}
setInterval(()=>notify("外部干渉ログ受信"),2600);

/* 入信 長押し */
join.addEventListener('pointerdown',e=>{
 e.preventDefault();
 join.classList.add('hold');
 join.textContent="接続中…";
 holdTimer=setTimeout(()=>{
   shatter();
   notify("接続確定");
   setTimeout(()=>{
     location.href="https://line.me/";
   },900);
 },2600);
});

['pointerup','pointerleave','pointercancel']
.forEach(ev=>{
 join.addEventListener(ev,()=>{
   clearTimeout(holdTimer);
   join.classList.remove('hold');
   join.textContent="長押しで入信";
 });
});

/* 割れ */
function shatter(){
 const flash=document.createElement('div');
 flash.className='flash';
 screen.appendChild(flash);
 flash.animate([{opacity:0},{opacity:.9},{opacity:0}],{duration:200});

 const s=document.createElement('div');
 s.className='shatter';
 const cx=window.innerWidth/2;
 const cy=window.innerHeight/2;

 for(let i=0;i<14;i++){
  const p=document.createElement('div');
  p.className='shard';
  const a=Math.random()*Math.PI*2;
  p.style.setProperty('--dx',`${Math.cos(a)*300}px`);
  p.style.setProperty('--dy',`${Math.sin(a)*300}px`);
  p.style.setProperty('--r',`${Math.random()*90}deg`);
  p.style.clipPath=`polygon(50% 50%, ${Math.random()*100}% 0, 100% ${Math.random()*100}%)`;
  s.appendChild(p);
 }
 screen.appendChild(s);
}
</script>

</body>
</html>
